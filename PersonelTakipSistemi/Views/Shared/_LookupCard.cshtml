@model dynamic
@{
    // Expected Model: { Title, Items (IEnumerable<dynamic>), Type }
    var items = Model.Items as IEnumerable<dynamic>;
    string type = Model.Type;
    string title = Model.Title;
}

<div class="card h-100">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">@title</h5>
        <button class="btn btn-sm btn-primary" onclick="openAddModal('@type', '@title')">
            <i class="bx bx-plus"></i> Ekle
        </button>
    </div>
    <div class="card-body" style="max-height: 300px; overflow-y: auto;">
        @if (items != null && items.Any())
        {
            <ul class="list-group list-group-flush">
                @foreach (var item in items)
                {
                    // Reflection to get Id and Ad generically or using dynamic
                    // Assuming all lookups have 'Ad' property.
                    // ID property name differs (BransId, YazilimId, etc.) so we need logic or reflection.
                    // But 'item' is dynamic here, let's try to find the ID property value.
                    
                    var props = item.GetType().GetProperties();
                    var idProp = ((System.Reflection.PropertyInfo[])props).FirstOrDefault(p => p.Name.EndsWith("Id") && p.Name != "PersonelId"); // Simple heuristic
                    var idVal = idProp != null ? idProp.GetValue(item) : 0;
                    var adVal = item.Ad;

                    <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                        <span>@adVal</span>
                        <button class="btn btn-xs btn-icon btn-outline-danger" onclick="deleteItem('@type', @idVal)">
                            <i class="bx bx-trash"></i>
                        </button>
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="text-muted small text-center my-4">Kayıt bulunamadı.</p>
        }
    </div>
</div>
